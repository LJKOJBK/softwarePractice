{"version":3,"sources":["LoginController.js"],"names":["cc","Class","extends","Component","properties","loadingBar","type","ProgressBar","default","loginButton","Button","worldSceneBGM","AudioClip","onLoad","gameSceneBGMAudioId","audioEngine","play","start","onLogin","node","active","progress","backup","loader","onProgress","count","amount","bind","director","preloadScene","loadScene","onDestroy","stop"],"mappings":";;;;;;AAUA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,oBAAY;AACRC,kBAAMN,GAAGO,WADD;AAERC,qBAAS;AAFD,SAhBJ;AAoBRC,qBAAa;AACTH,kBAAMN,GAAGU,MADA;AAETF,qBAAS;AAFA,SApBL;AAwBRG,uBAAc;AACVL,kBAAMN,GAAGY,SADC;AAEVJ,qBAAS;AAFC;AAxBN,KAHP;;AAiCL;;AAEAK,UAnCK,oBAmCK;AACN,aAAKC,mBAAL,GAA2Bd,GAAGe,WAAH,CAAeC,IAAf,CAAoB,KAAKL,aAAzB,EAAwC,IAAxC,EAA8C,CAA9C,CAA3B;AACH,KArCI;AAuCLM,SAvCK,mBAuCI,CAER,CAzCI;;;AA2CL;AACAC,aAAS,mBAAU;AACf,aAAKb,UAAL,CAAgBc,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACA,aAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACA,aAAKf,UAAL,CAAgBgB,QAAhB,GAA2B,CAA3B;AACA,YAAIC,SAAStB,GAAGuB,MAAH,CAAUC,UAAvB;AACAxB,WAAGuB,MAAH,CAAUC,UAAV,GAAuB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AAC5C,iBAAKrB,UAAL,CAAgBgB,QAAhB,GAA2BI,QAAQC,MAAnC;AACH,SAFsB,CAErBC,IAFqB,CAEhB,IAFgB,CAAvB;;AAIA;AACA3B,WAAG4B,QAAH,CAAYC,YAAZ,CAAyB,MAAzB,EAAiC,YAAY;AACzC7B,eAAGuB,MAAH,CAAUC,UAAV,GAAuBF,MAAvB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACA,iBAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;AACApB,eAAG4B,QAAH,CAAYE,SAAZ,CAAsB,MAAtB;AACH,SALgC,CAK/BH,IAL+B,CAK1B,IAL0B,CAAjC;AAMH,KA5DI;;AA8DLI,eAAW,qBAAU;AACjB/B,WAAGe,WAAH,CAAeiB,IAAf,CAAoB,KAAKlB,mBAAzB;AACH;;AAED;AAlEK,CAAT,GAZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginController.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nimport AudioUtils from \"../Utils/AudioUtils\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        loadingBar: {\r\n            type: cc.ProgressBar,\r\n            default: null,\r\n        },\r\n        loginButton: {\r\n            type: cc.Button,\r\n            default: null,\r\n        },\r\n        worldSceneBGM:{\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // 游戏全局入口，点击登录按钮调用\r\n    onLogin: function(){\r\n        this.loadingBar.node.active = true;\r\n        this.loginButton.node.active = false;\r\n        this.loadingBar.progress = 0;\r\n        let backup = cc.loader.onProgress;\r\n        cc.loader.onProgress = function (count, amount) {\r\n            this.loadingBar.progress = count / amount;\r\n        }.bind(this);\r\n\r\n        // 预加载游戏场景\r\n        cc.director.preloadScene(\"Game\", function () {\r\n            cc.loader.onProgress = backup;\r\n            this.loadingBar.node.active = false;\r\n            this.loginButton.node.active = true;\r\n            cc.director.loadScene(\"Game\");\r\n        }.bind(this));\r\n    },\r\n\r\n    onDestroy: function(){\r\n        cc.audioEngine.stop(this.gameSceneBGMAudioId);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}