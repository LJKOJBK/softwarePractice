{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Controller/assets\\Script\\Controller\\LoginController.js"],"names":["global","require","cc","Class","extends","Component","properties","loadingBar","type","ProgressBar","default","loginBtn1","Button","loginBtn2","worldSceneBGM","AudioClip","onLoad","gameSceneBGMAudioId","audioEngine","play","start","onLogin","e","node","active","progress","backup","loader","onProgress","count","amount","bind","director","preloadScene","loadScene","onDestroy","stop"],"mappings":";;;;;;AAUA;;;;;;AACA,IAAIA,SAASC,QAAQ,cAAR,CAAb,EAXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,oBAAY;AACRC,kBAAMN,GAAGO,WADD;AAERC,qBAAS;AAFD,SAhBJ;AAoBR;AACA;AACA;AACA;AACAC,mBAAW;AACPH,kBAAMN,GAAGU,MADF;AAEPF,qBAAS;AAFF,SAxBH;AA4BRG,mBAAW;AACPL,kBAAMN,GAAGU,MADF;AAEPF,qBAAS;AAFF,SA5BH;AAgCRI,uBAAc;AACVN,kBAAMN,GAAGa,SADC;AAEVL,qBAAS;AAFC;AAhCN,KAHP;;AAyCL;;AAEAM,UA3CK,oBA2CK;AACN,aAAKC,mBAAL,GAA2Bf,GAAGgB,WAAH,CAAeC,IAAf,CAAoB,KAAKL,aAAzB,EAAwC,IAAxC,EAA8C,CAA9C,CAA3B;AACH,KA7CI;AA+CLM,SA/CK,mBA+CI,CAER,CAjDI;;;AAmDL;AACA;AACAC,aAAS,iBAASC,CAAT,EAAYd,IAAZ,EAAiB;AACtB,aAAKD,UAAL,CAAgBgB,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACA,aAAKb,SAAL,CAAeY,IAAf,CAAoBC,MAApB,GAA6B,KAAKX,SAAL,CAAeU,IAAf,CAAoBC,MAApB,GAA6B,KAA1D;AACAxB,eAAOQ,IAAP,GAAcA,IAAd;AACA,aAAKD,UAAL,CAAgBkB,QAAhB,GAA2B,CAA3B;AACA,YAAIC,SAASxB,GAAGyB,MAAH,CAAUC,UAAvB;AACA1B,WAAGyB,MAAH,CAAUC,UAAV,GAAuB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AAC5C,iBAAKvB,UAAL,CAAgBkB,QAAhB,GAA2BI,QAAQC,MAAnC;AACH,SAFsB,CAErBC,IAFqB,CAEhB,IAFgB,CAAvB;;AAIA;AACA7B,WAAG8B,QAAH,CAAYC,YAAZ,CAAyB,MAAzB,EAAiC,YAAY;AACzC/B,eAAGyB,MAAH,CAAUC,UAAV,GAAuBF,MAAvB;AACA,iBAAKnB,UAAL,CAAgBgB,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACA,iBAAKb,SAAL,CAAeY,IAAf,CAAoBC,MAApB,GAA6B,KAAKX,SAAL,CAAeU,IAAf,CAAoBC,MAApB,GAA6B,IAA1D;AACAtB,eAAG8B,QAAH,CAAYE,SAAZ,CAAsB,MAAtB;AACH,SALgC,CAK/BH,IAL+B,CAK1B,IAL0B,CAAjC;AAMH,KAtEI;;AAwELI,eAAW,qBAAU;AACjBjC,WAAGgB,WAAH,CAAekB,IAAf,CAAoB,KAAKnB,mBAAzB;AACH;;AAED;AA5EK,CAAT","file":"LoginController.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\nimport AudioUtils from \"../Utils/AudioUtils\";\r\nlet global = require('../Global.js');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        loadingBar: {\r\n            type: cc.ProgressBar,\r\n            default: null,\r\n        },\r\n        // loginButton: {\r\n        //     type: cc.Button,\r\n        //     default: null,\r\n        // },\r\n        loginBtn1: {\r\n            type: cc.Button,\r\n            default: null\r\n        },\r\n        loginBtn2: {\r\n            type: cc.Button,\r\n            default: null\r\n        },\r\n        worldSceneBGM:{\r\n            type: cc.AudioClip,\r\n            default: null,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // 游戏全局入口，点击登录按钮调用\r\n    // 状态0表示休闲模式，1表示计时模式\r\n    onLogin: function(e, type){\r\n        this.loadingBar.node.active = true;\r\n        this.loginBtn1.node.active = this.loginBtn2.node.active = false\r\n        global.type = type\r\n        this.loadingBar.progress = 0;\r\n        let backup = cc.loader.onProgress;\r\n        cc.loader.onProgress = function (count, amount) {\r\n            this.loadingBar.progress = count / amount;\r\n        }.bind(this);\r\n\r\n        // 预加载游戏场景\r\n        cc.director.preloadScene(\"Game\", function () {\r\n            cc.loader.onProgress = backup;\r\n            this.loadingBar.node.active = false;\r\n            this.loginBtn1.node.active = this.loginBtn2.node.active = true\r\n            cc.director.loadScene(\"Game\");\r\n        }.bind(this));\r\n    },\r\n\r\n    onDestroy: function(){\r\n        cc.audioEngine.stop(this.gameSceneBGMAudioId);\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}