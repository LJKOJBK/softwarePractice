{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\Controller/assets\\Script\\Controller\\LoginController.js"],"names":["cc","Class","extends","Component","properties","loadingBar","type","ProgressBar","default","loginButton","Button","worldSceneBGM","AudioClip","onLoad","gameSceneBGMAudioId","audioEngine","play","start","onLogin","node","active","progress","backup","loader","onProgress","count","amount","bind","director","preloadScene","loadScene","onDestroy","stop"],"mappings":";;;;;;AAUA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,oBAAY;AACRC,kBAAMN,GAAGO,WADD;AAERC,qBAAS;AAFD,SAhBJ;AAoBRC,qBAAa;AACTH,kBAAMN,GAAGU,MADA;AAETF,qBAAS;AAFA,SApBL;AAwBRG,uBAAc;AACVL,kBAAMN,GAAGY,SADC;AAEVJ,qBAAS;AAFC;AAxBN,KAHP;;AAiCL;;AAEAK,UAnCK,oBAmCK;AACN,aAAKC,mBAAL,GAA2Bd,GAAGe,WAAH,CAAeC,IAAf,CAAoB,KAAKL,aAAzB,EAAwC,IAAxC,EAA8C,CAA9C,CAA3B;AACH,KArCI;AAuCLM,SAvCK,mBAuCI,CAER,CAzCI;;;AA2CL;AACAC,aAAS,mBAAU;AACf,aAAKb,UAAL,CAAgBc,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACA,aAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACA,aAAKf,UAAL,CAAgBgB,QAAhB,GAA2B,CAA3B;AACA,YAAIC,SAAStB,GAAGuB,MAAH,CAAUC,UAAvB;AACAxB,WAAGuB,MAAH,CAAUC,UAAV,GAAuB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AAC5C,iBAAKrB,UAAL,CAAgBgB,QAAhB,GAA2BI,QAAQC,MAAnC;AACH,SAFsB,CAErBC,IAFqB,CAEhB,IAFgB,CAAvB;;AAIA;AACA3B,WAAG4B,QAAH,CAAYC,YAAZ,CAAyB,MAAzB,EAAiC,YAAY;AACzC7B,eAAGuB,MAAH,CAAUC,UAAV,GAAuBF,MAAvB;AACA,iBAAKjB,UAAL,CAAgBc,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACA,iBAAKX,WAAL,CAAiBU,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;AACApB,eAAG4B,QAAH,CAAYE,SAAZ,CAAsB,MAAtB;AACH,SALgC,CAK/BH,IAL+B,CAK1B,IAL0B,CAAjC;AAMH,KA5DI;;AA8DLI,eAAW,qBAAU;AACjB/B,WAAGe,WAAH,CAAeiB,IAAf,CAAoB,KAAKlB,mBAAzB;AACH;;AAED;AAlEK,CAAT,GAZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginController.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Controller","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport AudioUtils from \"../Utils/AudioUtils\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        loadingBar: {\n            type: cc.ProgressBar,\n            default: null,\n        },\n        loginButton: {\n            type: cc.Button,\n            default: null,\n        },\n        worldSceneBGM:{\n            type: cc.AudioClip,\n            default: null,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.gameSceneBGMAudioId = cc.audioEngine.play(this.worldSceneBGM, true, 1);\n    },\n\n    start () {\n\n    },\n\n    // 游戏全局入口，点击登录按钮调用\n    onLogin: function(){\n        this.loadingBar.node.active = true;\n        this.loginButton.node.active = false;\n        this.loadingBar.progress = 0;\n        let backup = cc.loader.onProgress;\n        cc.loader.onProgress = function (count, amount) {\n            this.loadingBar.progress = count / amount;\n        }.bind(this);\n\n        // 预加载游戏场景\n        cc.director.preloadScene(\"Game\", function () {\n            cc.loader.onProgress = backup;\n            this.loadingBar.node.active = false;\n            this.loginButton.node.active = true;\n            cc.director.loadScene(\"Game\");\n        }.bind(this));\n    },\n\n    onDestroy: function(){\n        cc.audioEngine.stop(this.gameSceneBGMAudioId);\n    }\n\n    // update (dt) {},\n});\n"]}